<% admin_nav_crumbs admin_nav_public_list_types_link, admin_nav_public_list_type_link(@public_list_type) %>

<div class="container mt-4">
  <div class="btn-group" role="group">
    <%= admin_buttonly_link_to "edit", edit_admin_public_list_type_path(@public_list_type) %>
    <%= button_to "delete", admin_public_list_type_path(@public_list_type), method: :delete,
      class: 'btn btn-danger', data: { confirm: "Are you sure?" } %>
    <%= admin_buttonly_link_to "add entry", new_admin_public_list_type_public_list_path(@public_list_type) %>
  </div>
</div>

<div class="b-public-list-type-page container mt-4">
  <div class="row">
    <div class="container col-md-6">
      <div class="row mb-3">
        <div class="col-md-3 font-weight-bold text-end">Name:</div>
        <div class="col-md-9"><%= @public_list_type.name %></div>
      </div>

      <% if @public_list_type.wiki_url.present? %>
        <div class="row mb-3">
          <div class="col-md-3 font-weight-bold text-end">Wiki URL:</div>
          <div class="col-md-9">
            <%= admin_link_to_wiki_with_stats(@public_list_type) %>
          </div>
        </div>
      <% end %>

      <% if @public_list_type.generic_links.present? %>
        <div class="row mb-3">
          <div class="col-md-3 font-weight-bold text-end">Links:</div>
          <div class="col-md-9">
            <% @public_list_type.generic_links.each do |generic_link| %>
              <%= external_link_to generic_link.name, generic_link.url %>
            <% end %>
          </div>
        </div>
      <% end %>

      <div class="row mb-3">
        <div class="col-md-3 font-weight-bold text-end">Created At:</div>
        <div class="col-md-9"><%= admin_timestamp(@public_list_type.created_at) %></div>
      </div>

      <div class="row mb-3">
        <div class="col-md-3 font-weight-bold text-end">Updated At:</div>
        <div class="col-md-9"><%= admin_timestamp(@public_list_type.updated_at) %></div>
      </div>
    </div>
  </div>

  <table class="table border">
    <thead>
      <th><%= sortable_table_column("ID", "id") %></th>
      <th><%= sortable_table_column("YEAR", "year") %></th>
      <th>LINKS</th>
      <th>WIKI</th>
      <th>ENTRIES</th>
      <th><%= sortable_table_column("CREATED", "created_at") %></th>
      <th><%= sortable_table_column("UPDATED", "updated_at") %></th>
      <th>ACTIONS</th>
    </thead>
    <% @public_lists.each do |public_list| %>
      <tr>
        <td>
          <%= admin_link_to public_list.id, admin_public_list_type_public_list_path(@public_list_type, public_list) %>
        </td>
        <td>
          <%= public_list.year %>
        </td>
        <td>
          <%= admin_link_to "show", admin_public_list_type_public_list_path(@public_list_type, public_list) %>
          <%= admin_link_to "edit", edit_admin_public_list_type_public_list_path(@public_list_type, public_list) %>
        </td>
        <td>
          <%= external_link_to "wiki", public_list.wiki_url if public_list.wiki_url.present? %>
        </td>
        <td>
          <%= public_list.book_public_lists.size %>
        </td>
        <td>
          <%= admin_timestamp(public_list.created_at) %>
        </td>
        <td>
          <%= admin_timestamp(public_list.updated_at) %>
        </td>
        <td>
          <%= button_to "delete", admin_public_list_type_public_list_path(@public_list_type, public_list), method: :delete,
            class: "btn btn-danger" %>
        </td>
      </tr>
    <% end %>
  </table>
</div>
